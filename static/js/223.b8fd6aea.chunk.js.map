{"version":3,"file":"static/js/223.b8fd6aea.chunk.js","mappings":"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","sources":["Pocket/PocketFirestore.js","Pocket/PocketQueryFilter.js","Service/GetUserDetailData.jsx"],"sourcesContent":["import { collection, getDocs, updateDoc, query, where, doc, runTransaction } from 'firebase/firestore';\r\n\r\nimport { firestore } from '../firestoreAccount.js';\r\n\r\nexport default class FirestoreManager {\r\n    // ...\r\n\r\n    async Search(params) {\r\n        const collectionName = params.collection;\r\n        const whereFilters = JSON.parse(JSON.stringify(params.where.query));\r\n        const done = params.done;\r\n        const fail = params.fail;\r\n\r\n        try {\r\n            const collectionRef = collection(firestore, collectionName);\r\n            let queryConstraints = [];\r\n\r\n            // where filtrelerini uygula\r\n            if (whereFilters) {\r\n                queryConstraints = this.applyWhereFilters(whereFilters);\r\n            }\r\n\r\n            const querySnapshot = await getDocs(query(collectionRef, ...queryConstraints));\r\n            let results = [];\r\n\r\n            querySnapshot.forEach((doc) => {\r\n                const userData = doc.data();\r\n                results.push(userData);\r\n            });\r\n\r\n            done(results);\r\n        } catch (error) {\r\n            fail(error);\r\n        }\r\n    }\r\n    async Update(params) {\r\n        const collectionName = params.collection;\r\n        const updateData = params.data;\r\n        const docId = updateData[\"_id\"]; // Güncellenecek dokümanın ID'si\r\n        const docRef = doc(firestore, collectionName, docId);\r\n        const done = params.done;\r\n        const fail = params.fail;\r\n\r\n        try {\r\n            await runTransaction(firestore, async (transaction) => {\r\n                // Dokümanı oku (isterseniz)\r\n                const snapshot = await transaction.get(docRef);\r\n                if (!snapshot.exists()) {\r\n                    throw \"Transaction aborted rollback successfully\";\r\n                }\r\n\r\n                // Güncelleme işlemini yap\r\n                transaction.update(docRef, JSON.parse(JSON.stringify(updateData)));\r\n            });\r\n\r\n            // İşlem başarılı\r\n            done(true);\r\n        } catch (error) {\r\n            // Hata oluştu\r\n            fail(error);\r\n        }\r\n    }\r\n\r\n    // ...\r\n\r\n    applyWhereFilters(whereFilters) {\r\n        const operators = ['>', '<', '>=', '<=', '==', '!=', 'in']; // Desteklenen operatörler\r\n        let queryConstraints = [];\r\n\r\n        for (let field in whereFilters) {\r\n            if (whereFilters.hasOwnProperty(field)) {\r\n                let condition = whereFilters[field];\r\n                if (typeof condition === 'object' && Object.keys(condition).length === 1) {\r\n                    const operator = Object.keys(condition)[0];\r\n                    const value = condition[operator];\r\n                    if (operators.includes(operator)) {\r\n                        queryConstraints.push(where(field, operator, value));\r\n                    }\r\n                } else {\r\n                    queryConstraints.push(where(field, '==', condition));\r\n                }\r\n            }\r\n        }\r\n        return queryConstraints;\r\n    }\r\n\r\n}\r\n","export default class PocketQueryFilter {\r\n\tconstructor() {\r\n        this.query = {};\r\n        this.currentKey = null;\r\n    }\r\n\r\n    add(key, value) {\r\n        this.query[key] = value;\r\n        this.currentKey = key;\r\n        return this;\r\n    }\r\n\r\n    operator(operator) {\r\n        if (this.currentKey) {\r\n            if (!this.query[this.currentKey]) {\r\n                this.query[this.currentKey] = {};\r\n            }\r\n\r\n            if (Object.prototype.toString.call(this.query[this.currentKey]) !== '[object Object]') {\r\n                // Anahtar zaten bir nesne değilse, yeni bir nesne oluşturup değeri null olarak ata\r\n                let temp = this.query[this.currentKey];\r\n                this.query[this.currentKey] = {};\r\n                this.query[this.currentKey][operator] = temp;\r\n            } else {\r\n                this.query[this.currentKey][operator] = null;\r\n            }\r\n        } else {\r\n            console.error('No key specified. Please use add method first.');\r\n        }\r\n        return this.query;\r\n    }\r\n}","// services/GetUserDocs.js\r\nimport PocketFirestore from '../Pocket/PocketFirestore';\r\nimport PocketLocalService from '../Pocket/PocketLocalService';\r\nimport PocketQueryFilter from '../Pocket/PocketQueryFilter';\r\nimport Pocket from '../Pocket/Pocket';\r\n/**\r\n *\r\n * @param {Pocket} criteria\r\n */\r\nconst GetUserDocs = async (criteria) => {\r\n     try {\r\n          PocketLocalService.parameterMustBeFill(criteria, \"name\");\r\n\r\n          let filter = new PocketQueryFilter();\r\n          filter.add(\"name\", \"murat\").operator(\"==\");\r\n\r\n          let dbRef = new PocketFirestore();\r\n\r\n          // dbRef.Search işlemini bir Promise içinde sar\r\n          const searchResult = await new Promise((resolve, reject) => {\r\n               dbRef.Search({\r\n                    collection: \"Users\",\r\n                    where: filter,\r\n                    done: resolve, // Başarılı sonuç için resolve fonksiyonunu kullan\r\n                    fail: reject  // Hata durumu için reject fonksiyonunu kullan\r\n               });\r\n          });\r\n          let searchResultBag = searchResult[0];\r\n          let menuList = searchResultBag.menu;\r\n\r\n          let pocket = new Pocket();\r\n\r\n          pocket.put(\"menuList\", menuList);\r\n\r\n          const responseMenu = await new Promise((resolve, reject) => {\r\n               PocketLocalService.executeService(\"GetUserMenuDetail\", pocket, (response) => {\r\n                    resolve(response);\r\n               }, (error) => {\r\n                    reject(error);\r\n               });\r\n          });\r\n\r\n          searchResultBag[\"menuResponseMerged\"] = {};\r\n\r\n          Object.assign(searchResultBag.menuResponseMerged, responseMenu);\r\n\r\n          return searchResultBag;\r\n\r\n          // Başarılı sonucu döndür\r\n     } catch (error) {\r\n          console.error('GetUserDocs hata:', error);\r\n          throw error;\r\n     }\r\n};\r\n\r\nexport default GetUserDocs;\r\n"],"names":["FirestoreManager","Search","params","collectionName","collection","whereFilters","JSON","parse","stringify","where","query","done","fail","collectionRef","firestore","queryConstraints","this","applyWhereFilters","querySnapshot","getDocs","results","forEach","doc","userData","data","push","error","Update","updateData","docId","docRef","runTransaction","async","transaction","get","exists","update","operators","field","hasOwnProperty","condition","Object","keys","length","operator","value","includes","PocketQueryFilter","constructor","currentKey","add","key","prototype","toString","call","temp","console","PocketLocalService","parameterMustBeFill","criteria","filter","dbRef","PocketFirestore","searchResultBag","Promise","resolve","reject","menuList","menu","pocket","Pocket","put","responseMenu","executeService","response","assign","menuResponseMerged"],"sourceRoot":""}